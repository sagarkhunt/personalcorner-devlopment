import React, { useEffect } from "react";
import { Table } from "react-bootstrap";
import crownImg from "../assets/images/wallet/tablePrice.png";
import avatarImg from "../assets/images/wallet/tableItem.png";
import { useDispatch, useSelector } from "react-redux";
import { tradeList } from "../store/trade/trade.fetch";
import moment from "moment";

const TransHistoryTab = () => {
  const dispatch = useDispatch();
  const public_key = localStorage.getItem("publicKey");

  useEffect(() => {
    if (public_key) {
      dispatch(tradeList(public_key));
    }
  }, [dispatch, public_key]);
  const tradeListData = useSelector((_state) => _state.trade.trade);
  console.log("tradeList", tradeListData);

  const checkStatus = (status) => {
    switch (status) {
      case "success":
        return "text-success";
      case "fail":
        return "text-danger";
      default:
        return "text-success";
    }
  };
  return (
    <div className="table-responsive transHistoryTab">
      <Table hover>
        <thead>
          <tr>
            <th className="minWidth">ACTIVITY</th>
            <th className="minWidth">ITEM</th>
            <th className="minWidth">PRICE</th>
            <th>STATUS</th>
            <th>FROM</th>
            <th>TX</th>
          </tr>
        </thead>
        <tbody>
          {tradeListData?.map((t, i) => (
            <tr key={i}>
              <td>
                <div className="detailColumn">
                  <div className="me-2 icon">
                    {t.activity_type === "Nft Purchase" ? (
                      <PurchaseIcon />
                    ) : (
                      <PurchaseIcon />
                    )}
                  </div>
                  <div className="content">
                    <h4 className="title">
                      {t.activity_type ?? "NFT Purchase"}
                    </h4>
                    <p className="mb-0">{moment(t?.createdAt).format("lll")}</p>
                  </div>
                </div>
              </td>
              <td>
                <div className="detailColumn">
                  <div className="me-2 img">
                    <img src={t?.nft[0]?.imageUrl} alt="" />
                  </div>
                  <div className="content">
                    <h4 className="title">{t?.nft[0]?.name}</h4>
                    <p className="mb-0">{t?.nft[0]?.collection[0]?.category}</p>
                  </div>
                </div>
              </td>
              <td>
                <div className="detailColumn">
                  <div className="me-2 img">
                    <img src={crownImg} alt="" />
                  </div>
                  <div className="content">
                    {/* <h4 className="title">20,000 PCC</h4> */}
                    <p className="mb-0">{t?.totalEth} ETH</p>
                  </div>
                </div>
              </td>
              <td>
                <span
                  className={`status ${checkStatus(t.status ?? "success")}`}
                >
                  {t.status ?? "success"}
                </span>
              </td>
              <td>
                <span className="title">{t?.seller}</span>
              </td>
              <td>
                <a className="link" href="#">
                  <svg
                    viewBox="0 0 38 38"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M35.448 0.549676C35.3723 0.552071 35.2967 0.558702 35.2216 0.569537H25.3186C25.0491 0.565726 24.7815 0.615517 24.5314 0.716017C24.2813 0.816516 24.0537 0.96572 23.8617 1.15496C23.6698 1.3442 23.5174 1.56969 23.4134 1.81834C23.3093 2.067 23.2558 2.33384 23.2558 2.60338C23.2558 2.87291 23.3093 3.13976 23.4134 3.38841C23.5174 3.63706 23.6698 3.86256 23.8617 4.0518C24.0537 4.24104 24.2813 4.39024 24.5314 4.49074C24.7815 4.59124 25.0491 4.64103 25.3186 4.63722H30.578L11.6775 23.5376C11.4823 23.725 11.3265 23.9495 11.2191 24.1979C11.1118 24.4463 11.0551 24.7136 11.0523 24.9842C11.0496 25.2548 11.1008 25.5232 11.2031 25.7737C11.3054 26.0242 11.4566 26.2518 11.648 26.4432C11.8393 26.6345 12.0669 26.7858 12.3174 26.888C12.568 26.9903 12.8364 27.0416 13.107 27.0388C13.3775 27.0361 13.6448 26.9794 13.8932 26.872C14.1416 26.7647 14.3661 26.6088 14.5535 26.4136L33.4539 7.5132V12.7726C33.4501 13.0421 33.4999 13.3097 33.6004 13.5598C33.7009 13.8099 33.8501 14.0375 34.0393 14.2294C34.2286 14.4214 34.4541 14.5738 34.7027 14.6778C34.9514 14.7818 35.2182 14.8354 35.4878 14.8354C35.7573 14.8354 36.0242 14.7818 36.2728 14.6778C36.5215 14.5738 36.747 14.4214 36.9362 14.2294C37.1254 14.0375 37.2746 13.8099 37.3751 13.5598C37.4756 13.3097 37.5254 13.0421 37.5216 12.7726V2.86158C37.5621 2.56876 37.5383 2.27063 37.4518 1.98794C37.3654 1.70526 37.2183 1.44482 37.021 1.22476C36.8236 1.00469 36.5806 0.830298 36.309 0.713709C36.0373 0.597121 35.7435 0.541144 35.448 0.549676ZM4.98016 0.569537C2.75704 0.569537 0.912476 2.4141 0.912476 4.63722V33.111C0.912476 35.3341 2.75704 37.1787 4.98016 37.1787H33.4539C35.677 37.1787 37.5216 35.3341 37.5216 33.111V20.9079C37.5254 20.6384 37.4756 20.3709 37.3751 20.1208C37.2746 19.8707 37.1254 19.643 36.9362 19.4511C36.747 19.2592 36.5215 19.1068 36.2728 19.0027C36.0242 18.8987 35.7573 18.8451 35.4878 18.8451C35.2182 18.8451 34.9514 18.8987 34.7027 19.0027C34.4541 19.1068 34.2286 19.2592 34.0393 19.4511C33.8501 19.643 33.7009 19.8707 33.6004 20.1208C33.4999 20.3709 33.4501 20.6384 33.4539 20.9079V33.111H4.98016V4.63722H17.1832C17.4527 4.64103 17.7203 4.59124 17.9704 4.49074C18.2205 4.39024 18.4481 4.24104 18.64 4.0518C18.832 3.86256 18.9844 3.63706 19.0884 3.38841C19.1924 3.13976 19.246 2.87291 19.246 2.60338C19.246 2.33384 19.1924 2.067 19.0884 1.81834C18.9844 1.56969 18.832 1.3442 18.64 1.15496C18.4481 0.96572 18.2205 0.816516 17.9704 0.716017C17.7203 0.615517 17.4527 0.565726 17.1832 0.569537H4.98016Z"
                      fill="white"
                    />
                  </svg>
                </a>
              </td>
            </tr>
          ))}
        </tbody>
      </Table>
    </div>
  );
};

export const TransferIcon = ({ className }) => (
  <svg
    className={className}
    viewBox="0 0 34 34"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
  >
    <path
      d="M0.67741 9.23188C0.733334 9.81695 1.12701 10.3165 1.68255 10.5079C2.23984 10.7015 2.85637 10.5525 3.26236 10.1275L7.01638 6.37353L7.01638 31.6637C7.01377 31.7099 7.01388 31.7562 7.0167 31.8025C7.05588 32.6338 7.76123 33.2732 8.5917 33.2351C9.42209 33.197 10.0616 32.4941 10.0264 31.6654L10.0264 6.37353L13.7805 10.1277C14.1564 10.5198 14.7138 10.6808 15.2421 10.5458L15.2424 10.5458C15.7683 10.4106 16.1826 10.0023 16.3237 9.47611C16.4647 8.95012 16.3093 8.38925 15.9193 8.01011C15.9189 8.00968 15.9185 8.00925 15.918 8.00883L8.68047 0.771236L8.52138 0.612137L8.36228 0.771236L1.12447 8.00907C1.12409 8.00944 1.12371 8.00982 1.12333 8.01019C0.797454 8.32793 0.633453 8.77725 0.67741 9.23188ZM0.67741 9.23188C0.677405 9.23183 0.677399 9.23177 0.677394 9.23172L0.901376 9.21033M0.67741 9.23188C0.677414 9.23193 0.677418 9.23196 0.677422 9.23201L0.901376 9.21033M0.901376 9.21033C0.948876 9.70784 1.28388 10.1328 1.75638 10.2953M0.901376 9.21033L1.75638 10.2953M1.75638 10.2953C2.23138 10.4603 2.75638 10.3328 3.10138 9.97034L1.75638 10.2953ZM17.3182 24.9787L17.3182 24.9792C17.3621 25.3181 17.517 25.6323 17.7637 25.8708L25.0023 33.1094L25.1614 33.2685L25.3205 33.1094L32.558 25.8718C32.5585 25.8714 32.5589 25.871 32.5593 25.8706C32.9493 25.4915 33.1047 24.9306 32.9637 24.4046C32.8226 23.8784 32.4083 23.4701 31.8824 23.3349L31.8821 23.3348C31.3538 23.1998 30.7964 23.3609 30.4205 23.753L26.6664 27.5071L26.6664 2.23202C26.6745 1.68873 26.3893 1.18673 25.9202 0.913727C25.4524 0.637535 24.8704 0.637535 24.4026 0.913727C23.9335 1.18673 23.6483 1.68872 23.6564 2.23202L23.6564 27.5071L19.9027 23.7534C19.4557 23.2821 18.7546 23.1507 18.1673 23.4296C17.5802 23.7085 17.2358 24.3315 17.3182 24.9787Z"
      fill="#132868"
      stroke="#132868"
      strokeWidth="0.45"
    />
  </svg>
);
export const PurchaseIcon = ({ className }) => (
  <svg
    className={className}
    viewBox="0 0 34 34"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
  >
    <path
      d="M6.20153 0.201172L0.514679 0.230469L0.530955 3.5638L3.98148 3.54753L9.47301 16.7214L7.47757 19.9115C6.08031 22.1427 7.7793 25.2077 10.4105 25.2077H30.5082V21.8743H10.4105C10.2251 21.8743 10.2037 21.8378 10.3031 21.679L12.2627 18.541H24.7106C25.9206 18.541 27.0374 17.8839 27.6241 16.8255L33.6299 6.01497C34.2466 4.90497 33.4416 3.54102 32.1716 3.54102H7.5915L6.20153 0.201172ZM18.8415 6.04102L23.8415 11.041H20.5082V15.2077H17.1748V11.041H13.8415L18.8415 6.04102ZM10.5082 26.8743C9.62411 26.8743 8.77627 27.2255 8.15115 27.8507C7.52602 28.4758 7.17484 29.3236 7.17484 30.2077C7.17484 31.0917 7.52602 31.9396 8.15115 32.5647C8.77627 33.1898 9.62411 33.541 10.5082 33.541C11.3922 33.541 12.2401 33.1898 12.8652 32.5647C13.4903 31.9396 13.8415 31.0917 13.8415 30.2077C13.8415 29.3236 13.4903 28.4758 12.8652 27.8507C12.2401 27.2255 11.3922 26.8743 10.5082 26.8743ZM27.1748 26.8743C26.2908 26.8743 25.4429 27.2255 24.8178 27.8507C24.1927 28.4758 23.8415 29.3236 23.8415 30.2077C23.8415 31.0917 24.1927 31.9396 24.8178 32.5647C25.4429 33.1898 26.2908 33.541 27.1748 33.541C28.0589 33.541 28.9067 33.1898 29.5319 32.5647C30.157 31.9396 30.5082 31.0917 30.5082 30.2077C30.5082 29.3236 30.157 28.4758 29.5319 27.8507C28.9067 27.2255 28.0589 26.8743 27.1748 26.8743Z"
      fill="#132868"
    />
  </svg>
);
export const PPCIcon = ({ className }) => (
  <svg
    className={className}
    viewBox="0 0 40 40"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
  >
    <path
      d="M27.5337 0.164062C20.893 0.164062 15.5144 3.13281 15.5144 6.79868C15.5144 10.4645 20.893 13.4333 27.5337 13.4333C34.1743 13.4333 39.5529 10.4645 39.5529 6.79868C39.5529 3.13281 34.1743 0.164062 27.5337 0.164062ZM39.5529 8.76983C39.5529 12.4357 34.1743 15.4044 27.5337 15.4044C20.9111 15.4044 15.5445 12.4657 15.5144 8.81791C15.5144 10.2121 15.5144 11.4141 15.5144 11.4141C15.5144 12.9826 16.518 14.4129 18.1587 15.5487C19.8233 16.0054 21.3017 16.6304 22.5337 17.4237C24.0601 17.8143 25.7428 18.0487 27.5337 18.0487C34.1743 18.0487 39.5529 15.0799 39.5529 11.4141V8.76983ZM39.5529 13.3852C39.5529 17.0511 34.1743 20.0198 27.5337 20.0198C26.7284 20.0198 25.9411 19.9597 25.1779 19.8756C25.7849 20.7169 26.2055 21.6364 26.3798 22.616C26.7644 22.64 27.143 22.6641 27.5337 22.6641C34.1743 22.6641 39.5529 19.6953 39.5529 16.0294V13.3852ZM12.1491 17.0871C5.50843 17.0871 0.129822 20.0559 0.129822 23.7218C0.129822 27.3876 5.50843 30.3564 12.1491 30.3564C18.7897 30.3564 24.1683 27.3876 24.1683 23.7218C24.1683 20.0559 18.7897 17.0871 12.1491 17.0871ZM39.5529 18.0006C39.5529 21.6665 34.1743 24.6352 27.5337 24.6352C27.1491 24.6352 26.7584 24.6052 26.3798 24.5871C26.3618 24.7013 26.3558 24.8576 26.3317 24.9718C26.4099 25.2061 26.476 25.4345 26.476 25.6929V27.2314C26.8245 27.2494 27.1731 27.2794 27.5337 27.2794C34.1743 27.2794 39.5529 24.3107 39.5529 20.6448V18.0006ZM39.5529 22.616C39.5529 26.2819 34.1743 29.2506 27.5337 29.2506C27.1491 29.2506 26.7584 29.2206 26.3798 29.2025C26.3618 29.3167 26.3558 29.473 26.3317 29.5871C26.4099 29.8155 26.476 30.0499 26.476 30.3083V31.8468C26.8245 31.8648 27.1731 31.8948 27.5337 31.8948C34.1743 31.8948 39.5529 28.9261 39.5529 25.2602V22.616ZM24.1683 25.6929C24.1683 29.3588 18.7897 32.3275 12.1491 32.3275C5.52646 32.3275 0.159869 29.3888 0.129822 25.741C0.129822 27.1352 0.129822 28.3371 0.129822 28.3371C0.129822 32.003 5.50843 34.9718 12.1491 34.9718C18.7897 34.9718 24.1683 32.003 24.1683 28.3371V25.6929ZM24.1683 30.3083C24.1683 33.9742 18.7897 36.9429 12.1491 36.9429C5.52646 36.9429 0.159869 34.0042 0.129822 30.3564C0.129822 31.7506 0.129822 32.9525 0.129822 32.9525C0.129822 36.6184 5.50843 39.5871 12.1491 39.5871C18.7897 39.5871 24.1683 36.6184 24.1683 32.9525V30.3083Z"
      fill="#132868"
    />
  </svg>
);

export default TransHistoryTab;
